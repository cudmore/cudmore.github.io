<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Auto login to ssh servers &middot; Robert Cudmore
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/hyde.css">
  <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">

  <!--
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
  -->
  
  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
                                 <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>





  <body class="layout-reverse">

    <div class="sidebar">
  <div class="container sidebar-sticky">

    
    
    <div id="sidebar">
    <!-- <nav class="sidebar-nav"> -->
      <!-- <a class="sidebar-nav-item" href="">Home</a> -->

      

	  <!-- <script>
  (function() {
    var cx = '014838221913568838622:5bpsoltbvmg';
    var gcse = document.createElement('script');
    gcse.type = 'text/javascript';
    gcse.async = true;
    gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
        '//cse.google.com/cse.js?cx=' + cx;
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(gcse, s);
  })();
</script>
<gcse:search></gcse:search>
 -->

		<section id="article">
		  <span class="sidebar-nav-item">Recent posts</span>
		    
		      &raquo; <a class="sidebarlink" href="/post/2015/06/25/this-is-an-example-post/">this is an example post</a><BR>
		    
		      &raquo; <a class="sidebarlink" href="/post/2015/06/08/Behavioral-acquisition-with-raspberry-arduino-video-and-scan-image/">Behavioral data acquisition with Raspberry, Arduino, Video and ScanImage</a><BR>
		    
		      &raquo; <a class="sidebarlink" href="/post/2015/06/07/Changing-default-mount-in-Apple-File-Sharing/">Changing default mount name in Apple File Sharing</a><BR>
		    
		      &raquo; <a class="sidebarlink" href="/post/2015/05/24/Non-blocking-stepper-motor-on-arduino/">Arduino + stepper motor + rotary encoder + scan image frame clock + serial logging</a><BR>
		    
		      &raquo; <a class="sidebarlink" href="/post/2015/05/05/mounting-a-usb-drive-at-boot/">Mounting a USB drive at boot</a><BR>
		    
		</section>

		<BR>

		<span class="sidebar-nav-item">Tag cloud</span>
		
    		<a style="font-size: 73%" href="/tags/#flask">
    		  flask
    		</a>
		
    		<a style="font-size: 123%" href="/tags/#python">
    		  python
    		</a>
		
    		<a style="font-size: 173%" href="/tags/#raspberry pi">
    		  raspberry pi
    		</a>
		
    		<a style="font-size: 106%" href="/tags/#data acquisition">
    		  data acquisition
    		</a>
		
    		<a style="font-size: 56%" href="/tags/#bokeh">
    		  bokeh
    		</a>
		
    		<a style="font-size: 56%" href="/tags/#protocols">
    		  protocols
    		</a>
		
    		<a style="font-size: 73%" href="/tags/#osx">
    		  osx
    		</a>
		
    		<a style="font-size: 90%" href="/tags/#raspberry">
    		  raspberry
    		</a>
		
    		<a style="font-size: 123%" href="/tags/#linux">
    		  linux
    		</a>
		
    		<a style="font-size: 56%" href="/tags/#arduino">
    		  arduino
    		</a>
		
    		<a style="font-size: 56%" href="/tags/#ScanImage">
    		  ScanImage
    		</a>
		
    		<a style="font-size: 56%" href="/tags/#tym">
    		  tym
    		</a>
		

		<BR>
		<BR>

		<section id="article">
		  <span class="sidebar-nav-item">Links</span>
		  &raquo; <a class="sidebarlink" href="http://robertcudmore.org">Homepage</a><BR>
		  &raquo; <a class="sidebarlink" href="https://github.com/cudmore/cudmore.github.io">Blog layout on github</a><BR>
		  &raquo; <a class="sidebarlink" href="http://www.flickr.com/cudmore">Flickr</a><BR>
		</section>
  
	</div>
<!--    </nav> -->

  </div>
</div>


    <div class="content container">

      <!-- added by bob -->
      <div class="masthead">
        <h3 class="masthead-title">
          <a href="/" title="Home">Robert Cudmore</a>

          
              &nbsp;&nbsp;&nbsp;<small><a href="/about">about</a></small>
          
              &nbsp;&nbsp;&nbsp;<small><a href="/archive">archive</a></small>
          
              &nbsp;&nbsp;&nbsp;<small><a href="/tags">tags</a></small>
          
              &nbsp;&nbsp;&nbsp;<small><a href="/software">software</a></small>
          


        </h3>
		<hr style="background:#202020; border:0; height:3px" />
      </div>

      <div class="post">
  <h3 class="post-title">Auto login to ssh servers</h1>
  <span class="post-date">04 May 2015</span>
  <p>In order to automatically login to an ssh server, you need to generate public/private rsa key pairs on a client and copy these keys to an ssh server. Next time you login from the client to the server, you won’t need to enter your password.</p>

<p>You should learn and understand a bit about ssh and its security implementations, mostly rsa. Your privacy is only as good as your ability to keep your keys secret, here is a recent example of a nifty ‘side channel attack‘ to obtain your secret keys.</p>

<p>In what follows I am setting up automatic rsa authentication from a client to a server:</p>

<ul>
<li>client: OS X or Linux, cudmore$</li>
<li>server: Raspian, <a href="mailto:pi@192.168.1.70">pi@192.168.1.70</a></li>
</ul>

<h4>[Client] Generate public/private rsa key pair</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">ssh-keygen -t rsa

Generating public/private rsa key pair.
Enter file in which to save the key (/Users/cudmore/.ssh/id_rsa): 
/Users/cudmore/.ssh/id_rsa already exists.
Overwrite (y/n)? y
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in /Users/cudmore/.ssh/id_rsa.
Your public key has been saved in /Users/cudmore/.ssh/id_rsa.pub.
The key fingerprint is:
a3:73:53:ee:68:54:37:e9:aa:64:68:4d:30:c3:4f:3a cudmore@localhost
The key&#39;s randomart image is:
+--[ RSA 2048]----+
|                 |
|     .           |
|      = .    .   |
|       B  . +    |
|      E S..o .   |
|       *.+  .    |
|      =.* ..     |
|     . =.+.      |
|       .o..      |
+-----------------+
</code></pre></div>
<h4>[Client] id_rsa.pub from the client to the ssh server (need to enter password)</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">scp ./.ssh/id_rsa.pub pi@192.168.1.70:~/id_rsa.pub
</code></pre></div>
<h4>[Client] Login to the ssh server (last time you will need a password)</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">ssh pi@192.168.1.70
</code></pre></div>
<h4>[Server] Copy the key into the correct location (on the server)</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">cat id_rsa.pub &gt;&gt; ./.ssh/authorized_keys
</code></pre></div>
<h4>[Server] Delete the original (on the server)</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">rm ./id_rsa.pub
</code></pre></div>
<h4>[Client] The next time you login you will not be asked for a password</h4>
<div class="highlight"><pre><code class="language-text" data-lang="text">ssh pi@192.168.1.70
</code></pre></div>
<h4>Notes</h4>

<ul>
<li>If your Raspberry does not have a ./.ssh directory you need to turn on ssh using ‘sudo raspi-config’ -&gt; advanced options -&gt; ssh</li>
<li>When you append to authorized_keys with ‘cat id_rsa.pub &gt;&gt; ./.ssh/authorized_keys’, the file will be created if it does not exist.</li>
<li>If your client is Mac OS X you will be asked for a passphrase when you generate your ssh public/private keys with ‘ssh-keygen -t rsa’. This is an extra level of security. The first time you login to your ssh server, OS X will ask for this passphrase. Again, your security is only as good as you keeping your passwords safe. Using a passphrase for your OSX keychain is convenient but if someone gets this passphrase, they in turn get all your passwords within your keychain. This may seem very circular and it is, the art is in being creative in breaking the loop.</li>
</ul>

<h4>Fun</h4>

<p>-ssh -o VisualHostKey=yes <a href="mailto:pi@192.168.1.70">pi@192.168.1.70</a></p>

</div>

<div class="post-tags">
  Tags: 
  
    
  
  
  <a href="/tags/#linux">linux</a>
  
</div>


<div class="post-tags">
    <p><font size="-1rem">&copy;2015. <A HREF="http://robertcudmore.org">Robert Cudmore</A>.</font></p>
</div>


<span class="page-nav-item-left">
    <a rel="prev" href="/post/2015/04/30/python-tricks/" title="View Python tricks">&laquo; Older</a>
</span>


<span class="page-nav-item-right">
    <a rel="next" href="/post/2015/05/05/X11%20on%20Raspberry/" title="View ">Newer &raquo;</a>
</span>



    </div>

  </body>
</html>
